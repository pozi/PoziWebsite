---
icon: link
---

# Pozi Publisher

Pozi Publisher standardises a wide range of spatial information from inside and outside your organisation into easily digestible ***map catalogues*** that integrate seamlessly into Pozi Web GIS.

## Working with Catalogues

A ***map catalogue*** is a collection of map layers, typically in XML format generated by a WFS `GetCapabilities` or QGIS `GetProjectSettings`.

The catalogue is the unit around which the Pozi Publisher workflow is based, either generating catalogues from various sources, modifying catalogues for specific use cases, or extracting information from catalogues.

## Installation

### Install Pozi Publisher

1. create folder `C:\Pozi\Publisher`
2. obtain Publisher from Pozi Support, and extract to/paste to the new folder

### Installing AWS Tools for Powershell

+++ Run Powershell as Administrator

1. Type `Install-Module -Name AWS.Tools.Installer`
2. Answer 'Y' to the various security prompts

+++ Alternative installation

1. Download [AWS Tools](https://sdk-for-net.amazonwebservices.com/ps/v4/latest/AWS.Tools.zip).
2. Type `$Env:PSModulePath` on a PowerShell command line. This will provide a list of possible folders that the module zip file can be extracted in. It needs to be one that the application can access when running as a task or service.
3. Extract the zip file into the chosen folder.

+++

### Install AWS Tools Modules

- Extra modules are required for authentication and using S3 buckets.
- Type `Install-AWSToolsModule AWS.Tools.EC2,AWS.Tools.S3 -CleanUp`

---

## Configuration

| Section | Key | Description | Example |
| --- | --- | --- | --- |
| **`Input`** | `source` | QGIS project folder | `source=C:\Pozi\Projects`
| | | QGIS project file | `source=C:\Pozi\Projects\Assets.qgs`
| | | QGIS GetProjectSettings URL | `source=http://localhost/pozi/qgisserver?MAP=C:/Pozi/Projects/Assets.qgs&SERVICE=WMS&REQUEST=GetProjectSettings` |
| | | WFS URL | `source=https://data.gov.au/geoserver/wfs?SERVICE=WFS&REQUEST=GetCapabilities` |
| | | WMS URL | `source=https://iws.maps.vic.gov.au/erdas-iws/ogc/wms/RDP?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities` |
| **`[Output]`** | `folder` | Destination folder for catalogue XML files | `folder=C:\Pozi\Cache` |
| | `name` | Name of XML file | `name=deeca-iws-wms-southerngrampians` |
| | `dataFolder` | Destination folder for GeoJSON and SLD files | `dataFolder=C:\Pozi\Cache` |
| | `searchFolder` | Destination for SearchDB file | `searchFolder=C:\Pozi\Search` |
| **`[QGIS_Server]`** | `url` | If the `source` is a QGIS project file or folder of files (as opposed to a URL), specify the URL of the QGIS Server which is needed to serve the required `GetProjectSettings` responses. | `url=http://localhost/pozi/qgisserver` |
| **`[Filters]`** | `include` | | `include=wimmera-grampians_2020dec20_air_vis_15cm_mga54` |
| | `exclude` | | `exclude=meeting-rooms,soccer` |
| **`[Replace]`** | `{text to replace}` | | `wimmera-grampians_2020dec20_air_vis_15cm_mga54.ecw=Aerial Photo Dec 2020` |
| **`[AWS]`** | `bucket` | Destination AWS S3 bucket | `bucket=connect.pozi.com/userdata/gleneira-publisher` |
| | `key` | Key | `key={Add Key}` |
| | `secret` | Secret | `secret={Add Secret}` |

## Examples

### Generate map catalogues from QGIS projects

Generate production-ready OGC-compliant map catalogues from QGIS projects.

- improve load times in web map applications by pre-generating catalogues from internal and external web map servers into static XML files
- version control of QGIS projects

==- Example

```ini
[Input]
source=\\cscgisweb02\d$\Pozi

[Output]
folder=C:\Pozi\Cache

[QGIS_Server]
url=http://localhost/pozi/qgisserver

```

==-

### Generate map catalogues from external sources

Save local versions of catalogues from external providers.


### Customise catalogues

Generate custom catalogues from external web servers.

- search and replace text
- filter layers
- embed custom metadata

### Bulk data generation/extraction

Export GeoJSON and SLD files for all layers in a catalogue.

- bulk download map data from external catalogues on a routine schedule

### Sync to cloud

Sync data generated from local sources up to S3.

- publish layers to the public from QGIS projects 

### Build search indexes

Compile index of features and attributes for fast searching.

- search index generator

## Running Publisher

### In Powershell

1. open Powershell
2. `cd C:\Pozi\Publisher`
3. `

### As scheduled task
